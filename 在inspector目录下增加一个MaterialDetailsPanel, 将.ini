在inspector目录下增加一个MaterialDetailsPanel, 将material-panel__details中的元素和相关代码移动到MaterialDetailsPanel 中, MaterialDetailsPanel是一个浮动面, 当点击material-list中的某一项时显示,并更新MaterialDetailsPanel中的参数为该材质的属性, 点击面板外部区域时隐藏.
MaterialDetailsPanel显示的时候 会浮动显示在InspectorPanel.vue面板的左侧, 位置为距离InspectorPanel左侧边缘10px, 距离顶部边缘10px. 并有一个关闭按钮, 点击关闭按钮时隐藏MaterialDetailsPanel.

需要将MaterialDetailsPanel面板浮动显示在SceneViewport.vue的上层, 而不是在InspectorPanel.vue内部. 以保证不会被SceneViewport.vue遮挡.

为MaterialDetailsPanel.vue增加一个和InspectorPanel.vue一样的v-toolbar, 以保证风格一致.并将关闭按钮放在v-toolbar的右侧.

将MaterialDetailsPanel.vue面板的样式整理成和InspectorPanel.vue一样的风格, 包括圆角, 阴影, 边框, 标题栏等. 同时将关闭按钮放置在标题栏的右侧的toggle-placement按钮位置.

修改成将 将MaterialDetailsPanel.vue浮动 位置为距离InspectorPanel左侧边缘20px, 距离顶部边缘20px

点击面板外部区域时不要隐藏. 只有关闭按钮,或是材质列表中没有选中项时才隐藏MaterialDetailsPanel.vue面板.

删除按钮,handleAddMaterialSlot按钮, 放置在v-expansion-panel的标题栏上在收起按钮左侧旁边. 

MaterialDetailsPanel.vue面板中的


const materialClasses = {
	'MeshBasicMaterial': THREE.MeshBasicMaterial,
	'MeshNormalMaterial': THREE.MeshNormalMaterial,
	'MeshLambertMaterial': THREE.MeshLambertMaterial,
	'MeshMatcapMaterial': THREE.MeshMatcapMaterial,
	'MeshPhongMaterial': THREE.MeshPhongMaterial,
	'MeshToonMaterial': THREE.MeshToonMaterial,
	'MeshStandardMaterial': THREE.MeshStandardMaterial,
	'MeshPhysicalMaterial': THREE.MeshPhysicalMaterial,
};

MaterialDetailsPanel.vue中增加一个材质类型的下拉选择框, 位置在名称输入框的下方. 下拉选择框的选项为materialClasses中的材质类型. 当选择不同的材质类型时, 会将当前材质更改为所选择的材质类型, 并保留原有材质的属性值(如果新材质类型有对应的属性的话). 例如, 如果当前材质是MeshBasicMaterial, 更改为MeshPhongMaterial时, 会保留颜色, 透明度等属性值.
当材质类型更改后, MaterialDetailsPanel.vue面板中的属性输入框会根据新材质类型进行更新, 显示该材质类型所支持的属性输入框. 同时将此材质应用到场景中所有使用该材质的对象上.

不在使用mesh-standard类型. 有多处normalizeSceneMaterialType函数定义,和MATERIAL_CLASS_NAMES变量一起整理到material.ts中.将materialClasses中的材质类型名称改为和MATERIAL_CLASS_NAMES中一致. 避免重复定义和命名不一致的问题.

MaterialDetailsPanel.vue选择


在AssetCategoryDefinition中增加一个Material和 Texture的key, 和AssetCategoryDefinition中的相关配置, 用于在ProjectPanel.vue显示材质资源类别. 使得材质资源可以在ProjectPanel.vue中进行浏览和选择.