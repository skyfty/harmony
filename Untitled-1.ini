editor/src/components/layout/PlanningDialog.vue中road层中的线段图形需要可以在一个线段的任意一位点击后以此位置为起点绘制新的线段图形。 当两个线段图形的端点重合时，允许将它们连接成一条连续的线段图形。当两个线段图形的端点不重合时，允许将它们断开成两个独立的线段图形。请实现上述功能。当线段图形交叉时，会将其合并成一个线段图形，并在交叉耟点处生成一个新的端点。请实现上述功能。可以支持多个线段交叉和合并。

不要用normalizeRoadLayerPolylines.ts文件名和其中的函数也不要单独RoadLayer相关的命名，请用更通用的命名。因为这个功能也会用于道路， 河流，管道、墙等其他图层的线段图形。

在选中某个线段图形的两端的断点后， 再点击画布的其他位置时，应该以此位置为起点绘制新的线段图形，并将其与选中的线段图形连接，形成两个独立的线段图形。

如果当前的绘制工具为线段绘制工具， 当点击线段图形后， 需要先执行选中此图形的逻辑， 而不是直接在线段的点击位置创建端点。如果线段图形已经被选中， 则允许在点击位置创建新的端点并绘制新的线段图形。

被选中的端点需要有明显的视觉效果， 以便用户区分哪些端点是被选中的。

端点的可点击范围需要适当增大， 以提升用户体验。并且需要一个其他的颜色来区分普通端点和可选中端点。现在的颜色太接近线段的颜色了， 不容易区分。

无法选中已经存在的线段端点， 在点击端点后， 只是闪烁了一下， 但并没有选中它。 需要修复这个bug。

在editor/src/components/layout/PlanningDialog.vue中道路层或是墙壁层创建了一个线段后， 点击此线段后， 如果点击位置已经有端点， 则不允许创建新的端点， 以避免重复创建端点。如果没有端点， 则在点击位置创建新的端点，并选中此端点。 此是可以从此端点开始绘制新的线段。当按下鼠标左键并拖动时， 允许移动此端点的位置， 并动态更新连接的线段图形。

在绘制线段过程中，如果点击的位置已经有端点，则将新线段连接到已有端点，而不是选中此端点。

点击创建端点时，如果两个端点非常接近（例如距离小于5个像素），则将它们合并为一个端点，以避免重复创建端点。

/home/sky/harmony/editor/src/utils/planningToScene.ts中convertPlanningTo3DScene函数在将道路图层中的线段数据转换为场景中的道路节点网格数据。 每个独立的线段图形应该转换为一个独立的道路节点网格对象。 请实现上述功能。只需要将线段图形数据转换成场景中道路节点数据，并不需要创建实际的3D网格对象。创建的场景节点需要默认锁定状态。

不需要改动createRoadNode函数，在转换数据时需要创建动态网格 ，保持现有逻辑不变。 因为在场景中手动创建道路节点数据是正确的， 只要保持现有逻辑不变即可。只需要将规划层中的线段图形数据正确转换为场景中的道路节点数据即可。

在转换成场景的道路节点数据时， 不需要自动将线段图形闭合成环形， 保持线段图形的原始状态即可。
不然会出现，在添加交叉道路线段时， 自动闭合成环形， 导致无法正确创建交叉道路节点网格的问题。

道路节点数据转换错误。 t1.png是转换后的场景截图， t2.png是规划层截图。 规划层分两次创建了道路线段， 第一次创建的是周边的矩形道路线段， 第二次创建的是中间的交叉道路线段。 交叉道路线段在穿过矩形道路线段时， 在矩形道路线段两侧线段上创建了两个新的端点， 但转换后的场景中右侧的交叉线段是混乱的， 并没有正确连接到矩形道路线段上。 请修复此问题， 使得规划层中的线段图形能够正确转换为场景中的道路节点网格数据。

可否将sceneStore.createRoadNode实现成支持创建图的结构。 点链和创建图哪种形式更好。 因为以后还行涉及到创建墙壁， 河流， 管道等图形。 创建图的形式更通用一些。 请评估一下。可以对比一下两种形式的优缺点。

将createRoadNode函数实现成支持联合输入（points 或 dynamicMesh）的方案B.


道路节点数据转换错误。 t1.png是转换后的场景截图，浅色为地形，深色为道路网格， t2.png是规划层截图。 在加大平滑度后，由%12到50%，转换后的场景中道路的交叉点的连接段发生了错乱， 网格分开了，而且中间多出了一个小网格片， 并没有正确连接到矩形道路线段上。 请修复此问题， 使得规划层中的线段图形能够正确转换为场景中的道路节点网格数据， 需要的效果是在交叉点处道路平滑连接， 线段交叉的连接角在不同的平滑度出现不同的平滑弧度，例如0平滑就呈现直角， 100平滑就呈现圆弧，并没有断开和多余的小网格片

为什么通过/home/sky/harmony/editor/src/components/editor/ViewportToolbar.vue中的道路工具创建的道路节点网格，在第一次绘制时，会在道路上生成很多的顶点呢， 如图所示，浅色为地形， 深色为道路， 黄色点为顶点。 这些顶点并不是用户手动创建的， 而是自动生成的。 请问这是为什么？ 如何避免这些多余的顶点生成？ 期望的效果是， 用户只在需要创建顶点的位置创建顶点， 道路网格只包含用户创建的顶点， 而不是自动生成很多不必要的顶点。 道路中的其他顶点是后期创建分支道路时自动生成的， 这是可以理解的， 但不希望在第一次创建道路时就生成很多不必要的顶点。

当绘制道路时，如果道路发生了交叉， 则在交叉点要生成新的端点， 并且要将交叉的道路正确连接起来， 而不是生成网格重叠的情况。 请修复此问题， 使得在道路交叉点正确生成端点并连接道路。如果在绘制道路时， 点击的位置已经有端点， 则将新道路连接到已有端点，而不是选中此端点。例如创建一个矩形道路时， 终点和起点重合， 则不应该创建新的端点， 而是将终点连接到起点端点。