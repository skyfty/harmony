
实现一个节点行为组件的脚本执行序列的功能，允许用户为节点的一个BehaviorEventType配置一个行为脚本列表，脚本会按顺序依次执行， 直到完全执行完毕或者某个脚本主动中断执行序列。
1. 实现如下脚本
    - 成功（Success）：立即成功，并不在执行序列中继续执行后续脚本
    - 失败（Failure）：立即失败，并不在执行序列中继续执行后续脚本
    - 延时（Delay）：等待指定时间后继续执行后续脚本
    - 移动到（MoveTo）：将相机镜头移动到组件挂载的场景节点所在位置，移动完成后继续执行后续脚本。可配置参数如下：
        1.移动速度:数值，单位：米/秒. 相机平滑移动到目标位置所需的的速度
        2.面向[节点正面，节点背面，节点左侧，节点右侧]：移动到目标位置后相机的朝向
        3.间隔:相机移动到场景节点位置的后，面向场景节点距离中心点的间隔距离，单位：米
    - 提示（ShowAlert）：在屏幕中央弹出一个提示框，显示指定的文本内容，用户点击确认后继续执行后续脚本。可配置参数如下：
        1.文本内容:字符串，提示框中显示的文本内容
        2.两个复选框：显示确认按钮，显示取消按钮，用户可以选择显示其中一个按钮或者同时显示两个按钮
        3.能重新设置两个按钮的文本内容
        4.如果用户点击了取消按钮，则中断后续脚本的执行序列，否则继续执行后续脚本
    - 平视（Look）：将相机镜头调整为水平视角，保持当前相机位置不变，调整完成后继续执行后续脚本
    
    - 观察（Watch）：调整相机镜头的方向和俯仰角度，面向场景中的一个指定节点的中心点，可配置参数如下：
        1.目标节点:一个拾取按钮，点击后可以从场景中选择一个节点作为观察目标，在选取时隐藏当前面板，选取完成或按ESC取消选取后重新显示面板
        2.默认目标节点自动设置为组件挂载的场景节点。
        3. 在/home/sky/harmony/editor/src/components/inspector/behavior/目录下实现配置面板 WatchParams.vue，用于配脚本的参数

        添加如下脚本
    - 显示（Show）：将目标节点设置为可见状态，完成后继续执行后续脚本,
        1.目标节点:一个拾取按钮，点击后可以从场景中选择一个节点作为操作目标，在选取时隐藏当前面板，选取完成或按ESC取消选取后重新显示面板。 将目标节点设置为可见状态，完成后继续执行后续脚本
        2.默认目标节点自动设置为组件挂载的场景节点。
        3. 在/home/sky/harmony/editor/src/components/inspector/behavior/目录下实现配置面板 ShowParams.vue，用于配脚本的参数

    - 隐藏（Hide）：将目标节点设置为不可见状态，完成后继续执行后续脚本
        1.目标节点:一个拾取按钮，点击后可以从场景中选择一个节点作为操作目标，在选取时隐藏当前面板，选取完成或按ESC取消选取后重新显示面板。 将目标节点设置为不   不可见状态，完成后继续执行后续脚本
        2.默认目标节点自动设置为组件挂载的场景节点。
        3. 在/home/sky/harmony/editor/src/components/inspector/behavior/目录下实现配置面板 HideParams.vue，用于配脚本的参数


    - 幻灯片（Lantern）：在屏幕中央弹出一个展示框，用幻灯片效果展示内容，可以在展示框中左右滑动，循环看每个幻灯片。用户点击确认后继续执行后续脚本。可配置参数如下：
        1. 幻灯片列表：一个幻灯片列表，用户可以添加或删除幻灯片，每个幻灯片可以配置如下内容：
            1.标题:字符串，幻灯片的标题
            2.图片:图片资源，幻灯片中显示的图片，可以从资源库中拖动图片资源到图片区域，或者点击图片区域从资源库中选择图片资源
            3.描述:字符串，幻灯片的描述文本内容
            4.布局：[图片在上，文本在下；图片在左，文本在右；图片在右，文本在左]，配置幻灯片中图片和文本的布局方式
        2. 在/home/sky/harmony/editor/src/components/inspector/behavior/目录下实现幻灯片配置面板 LanternParams.vue，用于配置幻灯片脚本的参数
并在ScenePreviewView.vue中实现脚本的执行逻辑

在BehaviorEventType中增加如下事件类型, 在ScenePreviewView.vue中使用：
 1. approach: 当相机靠近组件挂载的场景节点到指定距离时触发该事件
 2. depart: 当相机远离组件挂载的场景节点到指定距离时触发该事件

 实现在显示、隐藏、观察脚本中从场景中选择一个节点作为脚本参数的操作目标节点，点击场景中的节点后，脚本配置面板重新显示，并将选取的节点设置为脚本的操作目标节点。这些脚本的默认目标节点自动设置为组件挂载的场景节点。点击ESC键可以取消节点的选取操作，重新显示脚本配置面板但不更改操作目标节点， 同时保持当前的激活节点的状态，避免脚本编辑器的意外关闭。

 幻灯片（Lantern）脚本的配置面板实现面板实现方式如下
 1. 将布局下拉选项放到每个幻灯片工具栏区域的上
 2. 每个幻灯片编辑区域包含一个图片区域、描述输入框（多行文本框）。不要标题框
 3. 图片编辑区域支持从资源库拖动图片资源到图片区域
 4. 描述输入框和图片区域会根据布局选项的变化自动调整位置，以便直观地反映出在场景预览时幻灯片的显示效果
 5. 图片编辑区域和描述编辑框要按1：1比例布局, 不要太小，比如布局为上下排列，则图片编辑区域和描述编辑框都应占据幻灯片内容区域的50%高度。
 图片编辑区域和描述编辑框太大了， 缩小一些


 在显示、隐藏、观察脚本中从场景中选择一个场景节点作为脚本参数的操作目标节点这个功能需求没有实现完毕， 需要继续实现这个功能。在执行beginPick函数后什么也没有发生， 需要实现拾取节点的功能逻辑。

 去掉BehaviorScriptType中的success，failure脚本类型，这两个脚本类型没有实际意义，不需要实现。
 去掉BehaviorEventType中的hover，fdrag类型及其相关代码和引用，这两个类型没有实际意义，不需要实现。

 在ShowParams.vue中点击“选择节点”按钮后， ShowParams的onBeforeUnmount函数被调用了，但是ShowParams.vue并没有消失， 同时导致拾取功能无法实现， 需要修复这个问题。其他脚本的参数面板也存在类似的问题，比如WatchParams.vue和HideParams.vue， 需要一并修复。

 当在场景中拾取节点时， 需要将鼠标光标变成十字形， 以便用户知道当前处于拾取节点的状态， 并将鼠标当前拾取位置的节点高亮显示， 以便用户知道当前鼠标指向的是哪个节点。 按ESC键取消拾取节点时， 恢复鼠标光标和节点的高亮显示状态。

 在拾取过程中点击鼠标右键也可以取消拾取操作， 和按ESC键的效果一样。 在点击拾取按钮后， 需要隐藏当前脚本参数面板， 等待用户在场景中拾取节点完成后再重新显示脚本参数面板。

 ShowParams.vue中visibility-params下的样式重新排列，将startPicking按钮，targetNodeName， clearTarget按钮用一行显示。 startPicking按钮使用图标按钮， 不要文字按钮， 按钮图标使用一个目标靶的图标， 提示文字修改为“点击场景中的节点进行选择，显示在左侧，右侧显示清除按钮”。 清除按钮使用一个叉号图标按钮， 不要文字按钮。中间空间显示目标节点的名称， 如果没有选择目标节点则显示“未选择节点”。 其他脚本参数面板也做类似的修改，比如WatchParams.vue和HideParams.vue， 需要一并修改。

 在BehaviorDetailsPanel.vue面板中增加一个输入框用于编辑SceneBehavior.name名称属性， 方便用户区分不同的行为组件实例。并在行为组件列表中显示该名称属性， 不在显示行为的脚本sequence

 LanternParams.vue中的description文本框可以接收从资源库拖动过来的文本资源， 需要引用资源，而不是直接使用文本内容。 需要实现这个功能。

 在MaterialPanel.vue中的materialListEntries每个列表项右边增加一个删除的图标按钮， 可以删除该材质列表项。在删除后， 不要自动选中其他材质列表项。 如果MaterialDetailsPanel.vue显示的材质列表项被删除， 则MaterialDetailsPanel.vue面板自动关闭。


 为behavior-palette__item和behavior-sequence中的每一项增加一个v-tooltip， 鼠标悬停时显示脚本类型的名称， 方便用户识别每个脚本项的功能。

 MaterialPanel.vue删除材质列表项。在删除后， 不要自动选中其他材质列表项。 如果MaterialDetailsPanel.vue显示的材质列表项被删除， 则MaterialDetailsPanel.vue面板自动关闭。

ScenePreviewView.vue中使用的资源， 如图片， 文本等资源， 需要参考resolvePackageEntry函数的实现完成资源的引用， 不能直接使用资源的路径字符串， 需要实现这个功能。 其中涉及到幻灯片的描述文本，图片资源的引用， 以及ShowAlert脚本中的文本资源引用等功能。

 ShowAlertParams.vue中的content文本框可以接收从资源库拖动过来的文本资源， 需要引用资源，而不是直接使用文本内容。 需要实现这个功能。


在ScenePreviewView.vue中实现approach,depart事件的触发逻辑，当相机靠近或远离组件挂载的场景节点到指定距离时触发相应的事件，从而执行对应的脚本序列。

在ScenePreviewView.vue中实现watch脚本的逻辑，控制相机镜头调整方向和俯仰角度，面向场景中的一个指定节点的中心点。

实现BehaviorScriptType中移动到（MoveTo）脚本的配置
1. 在MoveToParams.vue中仿照ShowParams.vue样式，设置一个场景节点选择控件，可以选择场景中的一个节点作为移动到目标节点，点击拾取按钮后可以从场景中选择一个节点作为触发目标节点，在选取时隐藏当前面板，选取完成或按ESC取消选取后重新显示面板
2. 默认目标节点自动设置为组件挂载的场景节点。
3. 在MoveToParams.vue中添加数值输入框，用于设置移动速度，单位：米/秒，默认值为10米/秒
4. 在MoveToParams.vue中添加一个下拉列表，用于设置面向选项，包含[节点正面，节点背面，节点左侧，节点右侧]四个选项，默认值为节点正面
5. 在MoveToParams.vue中添加一个数值输入框，用于设置间隔距离，单位：米，默认值为1米


在BehaviorScriptType中增加一个trigger（触发器）脚本类型，用于触发场景中的一个指定节点中BehaviorEventType类型为perform的事件的脚本序列，并执行该节点Behavior组件的脚本序列。并在ScenePreviewView.vue中实现该脚本的执行逻辑。 
1. 在/home/sky/harmony/editor/src/components/inspector/behavior/目录下实现配置面板 TriggerParams.vue，用于配置trigger脚本的参数
2. TriggerParams.vue中仿照ShowParams.vue样式，设置一个场景节点选择控件，可以选择场景中的一个节点作为触发目标节点，点击拾取按钮后可以从场景中选择一个节点作为触发目标节点，在选取时隐藏当前面板，选取完成或按ESC取消选取后重新显示面板
3. 默认触发目标节点为空
4. 在TriggerParams.vue中添加一个下拉列表，下拉列表中显示触发目标节点中所有BehaviorEventType为perform的行为名称，用户可以选择其中一个Script作为触发目标脚本，默认为空。


在BehaviorScriptType中增加一个animation（动画）脚本类型，用于播放场景节点中的一个动画剪辑。并在ScenePreviewView.vue中实现该脚本的执行逻辑。
1. 在/home/sky/harmony/editor/src/components/inspector/behavior/目录下实现配置面板 AnimationParams.vue，用于配置animation脚本的参数
2. AnimationParams.vue中仿照ShowParams.vue样式，设置一个场景节点选择控件，可以选择场景中的一个节点作为动画目标节点，点击拾取按钮后可以从场景中选择一个节点作为动画目标节点，在选取时隐藏当前面板，选取完成或按ESC取消选取后重新显示面板
3. 默认触发目标节点为当前Behavior组件挂载的场景节点
4. 在AnimationParams.vue中添加一个下拉列表，下拉列表中显示动画目标节点中的所有动画剪辑名称，用户可以选择其中一个动画剪辑作为播放目标动画，默认为空。
5. 在AnimationParams.vue中添加一个复选框“循环播放”，用于设置动画播放是否循环播放，默认为不循环播放。
6.在AnimationParams.vue中添加一个复选框“等待播放完毕”，用于设置动画播放是否等待播放完毕，默认为不等待。 如果选择等待播放完毕，则在动画播放完成后继续执行后续脚本，否则立即继续执行后续脚本。
7. 在设置为循环播放时，忽略等待播放完毕选项，直接继续执行后续脚本。


1.在ProjectPanel.vue中的Assets目录下新加一个Behaviors目录， 
2. BehaviorDetailsPanel.vue的v-toolbar中增加一个“save as prefab”的图标按钮，点击后将当前Behavior的配置和参数序列化后保存为一个预制件资源，保存在Assets/Behaviors目录下，预制件名称使用Behavior组件的name属性作为文件名，如果name属性为空则使用“UnnamedBehavior.behavior”作为文件名。
3.可以将Behavior预制件资源从资源库拖动到场景中的一个场景节点上， 将该Behavior预制件资源实例化为一个Behavior组件并挂载到该场景节点上。
4.如果场景节点上已经存在Behavior组件，则将拖动的Behavior预制件资源替换相同类型的Behavior组件的配置和参数序列， 如果没有相同类型的Behavior组件则新增一个Behavior组件并挂载到该场景节点上。
5.可以将Behavior预制件资源从资源库拖动到BehaviorDetailsPanel.vue面板中， 将该Behavior预制件资源实例化为一个Behavior组件并替换当前Behavior组件的配置和参数序列。
6.可以将Behavior预制件资源从资源库拖动到当前激活节点的BehaviorPanel.vue中的Behavior组件列表中， 将该Behavior预制件资源实例化为一个Behavior组件并新增到当前选中场景节点的Behavior组件列表中。替换相同类型的Behavior组件的配置和参数序列， 如果没有相同类型的Behavior组件则新增一个Behavior组件并挂载到该场景节点上。

将HideParams.vue, MoveToParams.vue, ShowParams.vue, WatchParams.vue中的拾取节点功能组件代码提取到一个单独的可复用组件NodePicker.vue中放在/home/sky/harmony/editor/src/components/common目录下， 以便其他脚本参数面板也可以复用该组件实现拾取节点的功能。

在ViewportToolbar.vue中增加一个“Save as Prefab”图标按钮，点击后将当前选中激活的场景节点及其子节点序列化为一个节点预制件资源，保存在Assets/Prefabs目录下，预制件名称使用场景节点的名称作为文件名，如果名称为空则使用“UnnamedPrefab.prefab”作为文件名。可以将该预制件资源从资源库拖动到场景中， 将该预制件资源实例化为一个场景节点，并将其添加到场景中的鼠标放置位置上，。

因为有些场景节点太小， 或是隐藏不可前， 导致无法在场景中拾取节点，所以需要可以从HierarchyPanel.vue面板中的场景节点列表中拖动一个场景节点到NodePicker.vue组件中， 以便在脚本参数面板中选择场景节点作为脚本参数的目标节点。

在从HierarchyPanel.vue中拖动场景节点到NodePicker.vue组件时，当鼠标左键放开时handleDrop函数没有， 导致无法完成拖动，需要修复这个问题。

在TransformPanel.vue面板中增加一个InspectorVectorControls组件，用来设置一个场景节点的相对于中心点的offset属性， 以便用户可以通过TransformPanel.vue面板设置场景节点的偏移位置属性。 InspectorVectorControls组件的实现方式参考Position, Rotation, Scale等组件的实现方式。
通过节点的offset属性值来设置节点的偏移位置，从而实现节点的局部坐标位置调整功能。

在ScenePreviewView.vue中加载场景节点时， 提示模型 preset:models/box_glb_带透明度贴图.glb 解析失败， 应该是preset路径解析错误，需要修复这个问题。


将/home/sky/harmony/editor/src/utils/material.ts文件移动到/home/sky/harmony/schema目录下，做为一个公共库， 提供给editor, preview和miniprogram等模块加载网格模型使用使用， 将sceneGraph.ts中的相关材质处理代码删除， 统一使用schema目录下的material.ts中的材质处理代码。


将/home/sky/harmony/editor/src/utils/geometry.ts文件移动到/home/sky/harmony/schema目录下，做为一个公共库， 提供给editor, preview和miniprogram等模块加载网格模型使用使用， 将sceneGraph.ts中的createGeometry代码删除， 统一使用schema目录下的geometry.ts中的代码。

重新实现schema/sceneGraph.ts中的资源和加载管理功能， 使用AssetCacheEntry和AssetLoader类来管理资源的加载和缓存， 以便统一管理资源的加载和缓存逻辑， 避免重复加载相同的资源。ResourceCache中的assetSourceCache使用MaterialAssetSource做为缓存类型是不对的。参考assetCacheStore的实现方式， 将assetCacheStore的数据管理代码提取到schema目录下的assetCache.ts中,以便其他模块  也可以使用相同的资源缓存功能。但不要提取IndexedDb相关代码， 有些平台不支持， 

assetCacheStore.ts文件中fetchAssetData函数和assetCache.ts中的fetchAssetBlob函数逻辑类似， 需要统一调用assetCache.ts中的fetchAssetBlob函数，去掉fetchAssetData函数，并返回FetchedAssetData类型， 避免重复代码。

finalizePlaceholderNode函数中不要直接使用objectPlaceholderNode节点， 此时实际模型还未下载缓存， 因为object的类型可能是Group, 也可能是Mesh, 需要根据实际类型进行处理, 同时位置的放置也会有错误发生， 因为objectPlaceholderNode并不知道实际模型的大小，导致直接模型放置会有问题，可能会悬空或下沉到地面和错位。而是使用新的object创建一个新的场景节点， 通过放置位置重新计算实际模型的位置， 避免直接修改objectPlaceholderNode导致的问题。